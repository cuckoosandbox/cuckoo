var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(e){var t=this;e.onblob=function(e){for(var n=window.atob(e),a=new ArrayBuffer(n.length),r=new Uint8Array(a),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);t.ondata&&t.ondata(a)},e.onend=function(){t.onend&&t.onend()},this.ondata=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.ArrayBufferWriter=function(e){function t(t){for(var n="",a=0;a<t.byteLength;a++)n+=String.fromCharCode(t[a]);e.sendBlob(window.btoa(n))}var n=this;e.onack=function(e){n.onack&&n.onack(e)},this.sendData=function(e){var n=new Uint8Array(e);if(n.length<=8064)t(n);else for(var a=0;a<n.length;a+=8064)t(n.subarray(a,a+8094))},this.sendEnd=function(){e.sendEnd()},this.onack=null};var Guacamole=Guacamole||{};Guacamole.AudioPlayer=function(){this.sync=function(){}},Guacamole.AudioPlayer.isSupportedType=function(e){return Guacamole.RawAudioPlayer.isSupportedType(e)},Guacamole.AudioPlayer.getSupportedTypes=function(){return Guacamole.RawAudioPlayer.getSupportedTypes()},Guacamole.AudioPlayer.getInstance=function(e,t){return Guacamole.RawAudioPlayer.isSupportedType(t)?new Guacamole.RawAudioPlayer(e,t):null},Guacamole.RawAudioPlayer=function(e,t){var n=Guacamole.RawAudioPlayer._Format.parse(t),a=function(){var e=window.AudioContext||window.webkitAudioContext;if(e)try{return new e}catch(e){}return null}(),r=a.currentTime,o=new Guacamole.ArrayBufferReader(e),i=.02,s=.3,u=1===n.bytesPerSample?window.Int8Array:window.Int16Array,l=1===n.bytesPerSample?128:32768,c=[],d=function(e){if(e.length<=1)return e[0];var t=0;e.forEach(function(e){t+=e.length});var n=0,a=new u(t);return e.forEach(function(e){a.set(e,n),n+=e.length}),a},f=function(e){for(var t=Number.MAX_VALUE,a=e.length,r=Math.floor(e.length/n.channels),o=Math.floor(n.rate*i),s=Math.max(n.channels*o,n.channels*(r-o)),l=s;l<e.length;l+=n.channels){for(var c=0,d=0;d<n.channels;d++)c+=Math.abs(e[l+d]);c<=t&&(a=l+n.channels,t=c)}return a===e.length?[e]:[new u(e.buffer.slice(0,a*n.bytesPerSample)),new u(e.buffer.slice(a*n.bytesPerSample))]},h=function(e){c.push(new u(e))},m=function(){var e=d(c);return e?(c=f(e),e=c.shift()):null},p=function(e){var t=e.length/n.channels,o=a.currentTime;r<o&&(r=o);for(var i=a.createBuffer(n.channels,t,n.rate),s=0;s<n.channels;s++)for(var u=i.getChannelData(s),c=s,d=0;d<t;d++)u[d]=e[c]/l,c+=n.channels;return i};o.ondata=function(e){h(new u(e));var t=m();if(t){var o=a.currentTime;r<o&&(r=o);var i=a.createBufferSource();i.connect(a.destination),i.start||(i.start=i.noteOn),i.buffer=p(t),i.start(r),r+=t.length/n.channels/n.rate}},this.sync=function(){var e=a.currentTime;r=Math.min(r,e+s)}},Guacamole.RawAudioPlayer.prototype=new Guacamole.AudioPlayer,Guacamole.RawAudioPlayer._Format=function(e){this.bytesPerSample=e.bytesPerSample,this.channels=e.channels,this.rate=e.rate},Guacamole.RawAudioPlayer._Format.parse=function(e){var t,n=null,a=1;if("audio/L8;"===e.substring(0,9))e=e.substring(9),t=1;else{if("audio/L16;"!==e.substring(0,10))return null;e=e.substring(10),t=2}for(var r=e.split(","),o=0;o<r.length;o++){var i=r[o],s=i.indexOf("=");if(s===-1)return null;var u=i.substring(0,s),l=i.substring(s+1);switch(u){case"channels":a=parseInt(l);break;case"rate":n=parseInt(l);break;default:return null}}return null===n?null:new Guacamole.RawAudioPlayer._Format({bytesPerSample:t,channels:a,rate:n})},Guacamole.RawAudioPlayer.isSupportedType=function(e){return!(!window.AudioContext&&!window.webkitAudioContext)&&null!==Guacamole.RawAudioPlayer._Format.parse(e)},Guacamole.RawAudioPlayer.getSupportedTypes=function(){return window.AudioContext||window.webkitAudioContext?["audio/L8","audio/L16"]:[]};var Guacamole=Guacamole||{};Guacamole.BlobReader=function(e,t){var n,a=this,r=0;n=window.BlobBuilder?new BlobBuilder:window.WebKitBlobBuilder?new WebKitBlobBuilder:window.MozBlobBuilder?new MozBlobBuilder:new function(){var e=[];this.append=function(n){e.push(new Blob([n],{type:t}))},this.getBlob=function(){return new Blob(e,{type:t})}},e.onblob=function(t){for(var o=window.atob(t),i=new ArrayBuffer(o.length),s=new Uint8Array(i),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);n.append(i),r+=i.byteLength,a.onprogress&&a.onprogress(i.byteLength),e.sendAck("OK",0)},e.onend=function(){a.onend&&a.onend()},this.getLength=function(){return r},this.getBlob=function(){return n.getBlob()},this.onprogress=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.Client=function(e){function t(e){e!=d&&(d=e,r.onstatechange&&r.onstatechange(d))}function n(){return d==u||d==s}function a(t){var n=S[t];return null==n&&(n=S[t]=new Guacamole.Parser,n.oninstruction=e.oninstruction),n}var r=this,o=0,i=1,s=2,u=3,l=4,c=5,d=o,f=0,h=null,m={0:"butt",1:"round",2:"square"},p={0:"bevel",1:"miter",2:"round"},v=new Guacamole.Display,g={},y={},w={},S=[],b=[],I=[],G=new Guacamole.IntegerPool,T=[];this.getDisplay=function(){return v},this.sendSize=function(t,a){n()&&e.sendMessage("size",t,a)},this.sendKeyEvent=function(t,a){n()&&e.sendMessage("key",a,t)},this.sendMouseState=function(t){if(n()){v.moveCursor(Math.floor(t.x),Math.floor(t.y));var a=0;t.left&&(a|=1),t.middle&&(a|=2),t.right&&(a|=4),t.up&&(a|=8),t.down&&(a|=16),e.sendMessage("mouse",Math.floor(t.x),Math.floor(t.y),a)}},this.setClipboard=function(e){if(n()){for(var t=r.createClipboardStream("text/plain"),a=new Guacamole.StringWriter(t),o=0;o<e.length;o+=4096)a.sendText(e.substring(o,o+4096));a.sendEnd()}},this.createFileStream=function(t,n){var a=G.next();e.sendMessage("file",a,t,n);var o=T[a]=new Guacamole.OutputStream(r,a),i=o.sendEnd;return o.sendEnd=function(){i(),G.free(a),delete T[a]},o},this.createPipeStream=function(t,n){var a=G.next();e.sendMessage("pipe",a,t,n);var o=T[a]=new Guacamole.OutputStream(r,a),i=o.sendEnd;return o.sendEnd=function(){i(),G.free(a),delete T[a]},o},this.createClipboardStream=function(t){var n=G.next();e.sendMessage("clipboard",n,t);var a=T[n]=new Guacamole.OutputStream(r,n),o=a.sendEnd;return a.sendEnd=function(){o(),G.free(n),delete T[n]},a},this.createObjectOutputStream=function(t,n,a){var o=G.next();e.sendMessage("put",t,o,n,a);var i=T[o]=new Guacamole.OutputStream(r,o),s=i.sendEnd;return i.sendEnd=function(){s(),G.free(o),delete T[o]},i},this.requestObjectInputStream=function(t,a){n()&&e.sendMessage("get",t,a)},this.sendAck=function(t,a,r){n()&&e.sendMessage("ack",t,a,r)},this.sendBlob=function(t,a){n()&&e.sendMessage("blob",t,a)},this.endStream=function(t){n()&&e.sendMessage("end",t)},this.onstatechange=null,this.onname=null,this.onerror=null,this.onaudio=null,this.onvideo=null,this.onclipboard=null,this.onfile=null,this.onfilesystem=null,this.onpipe=null,this.onsync=null;var k=function(e){var t=g[e];return t||(t=0===e?v.getDefaultLayer():e>0?v.createLayer():v.createBuffer(),g[e]=t),t},E={"miter-limit":function(e,t){v.setMiterLimit(e,parseFloat(t))}},C={ack:function(e){var t=parseInt(e[0]),n=e[1],a=parseInt(e[2]),r=T[t];r&&(r.onack&&r.onack(new Guacamole.Status(a,n)),a>=256&&(G.free(t),delete T[t]))},arc:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseFloat(e[4]),i=parseFloat(e[5]),s=parseInt(e[6]);v.arc(t,n,a,r,o,i,0!=s)},audio:function(e){var t=parseInt(e[0]),n=e[1],a=b[t]=new Guacamole.InputStream(r,t),o=null;r.onaudio&&(o=r.onaudio(a,n)),o||(o=Guacamole.AudioPlayer.getInstance(a,n)),o?(y[t]=o,r.sendAck(t,"OK",0)):r.sendAck(t,"BAD TYPE",783)},blob:function(e){var t=parseInt(e[0]),n=e[1],a=b[t];a&&a.onblob&&a.onblob(n)},body:function(e){var t=parseInt(e[0]),n=I[t],a=parseInt(e[1]),o=e[2],i=e[3];if(n&&n.onbody){var s=b[a]=new Guacamole.InputStream(r,a);n.onbody(s,o,i)}else r.sendAck(a,"Receipt of body unsupported",256)},cfill:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]);v.setChannelMask(n,t),v.fillColor(n,a,r,o,i)},clip:function(e){var t=k(parseInt(e[0]));v.clip(t)},clipboard:function(e){var t=parseInt(e[0]),n=e[1];if(r.onclipboard){var a=b[t]=new Guacamole.InputStream(r,t);r.onclipboard(a,n)}else r.sendAck(t,"Clipboard unsupported",256)},close:function(e){var t=k(parseInt(e[0]));v.close(t)},copy:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=k(parseInt(e[6])),u=parseInt(e[7]),l=parseInt(e[8]);v.setChannelMask(s,i),v.copy(t,n,a,r,o,s,u,l)},cstroke:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=m[parseInt(e[2])],r=p[parseInt(e[3])],o=parseInt(e[4]),i=parseInt(e[5]),s=parseInt(e[6]),u=parseInt(e[7]),l=parseInt(e[8]);v.setChannelMask(n,t),v.strokeColor(n,a,r,o,i,s,u,l)},cursor:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=k(parseInt(e[2])),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=parseInt(e[6]);v.setCursor(t,n,a,r,o,i,s)},curve:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=parseInt(e[6]);v.curveTo(t,n,a,r,o,i,s)},dispose:function(e){var t=parseInt(e[0]);if(t>0){var n=k(t);n.dispose(),delete g[t]}else t<0&&delete g[t]},distort:function(e){var t=parseInt(e[0]),n=parseFloat(e[1]),a=parseFloat(e[2]),r=parseFloat(e[3]),o=parseFloat(e[4]),i=parseFloat(e[5]),s=parseFloat(e[6]);if(t>=0){var u=k(t);u.distort(n,a,r,o,i,s)}},error:function(e){var t=e[0],n=parseInt(e[1]);r.onerror&&r.onerror(new Guacamole.Status(n,t)),r.disconnect()},end:function(e){var t=parseInt(e[0]),n=b[t];n&&n.onend&&n.onend()},file:function(e){var t=parseInt(e[0]),n=e[1],a=e[2];if(r.onfile){var o=b[t]=new Guacamole.InputStream(r,t);r.onfile(o,n,a)}else r.sendAck(t,"File transfer unsupported",256)},filesystem:function(e){var t=parseInt(e[0]),n=e[1];if(r.onfilesystem){var a=I[t]=new Guacamole.Object(r,t);r.onfilesystem(a,n)}},identity:function(e){var t=k(parseInt(e[0]));v.setTransform(t,1,0,0,1,0,0)},img:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=k(parseInt(e[2])),o=e[3],i=parseInt(e[4]),s=parseInt(e[5]),u=b[t]=new Guacamole.InputStream(r,t),l=new Guacamole.DataURIReader(u,o);l.onend=function(){v.setChannelMask(a,n),v.draw(a,i,s,l.getURI())}},jpeg:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=parseInt(e[2]),r=parseInt(e[3]),o=e[4];v.setChannelMask(n,t),v.draw(n,a,r,"data:image/jpeg;base64,"+o)},lfill:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=k(parseInt(e[2]));v.setChannelMask(n,t),v.fillLayer(n,a)},line:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]);v.lineTo(t,n,a)},lstroke:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=k(parseInt(e[2]));v.setChannelMask(n,t),v.strokeLayer(n,a)},move:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]);if(t>0&&n>=0){var i=k(t),s=k(n);i.move(s,a,r,o)}},name:function(e){r.onname&&r.onname(e[0])},nest:function(e){var t=a(parseInt(e[0]));t.receive(e[1])},pipe:function(e){var t=parseInt(e[0]),n=e[1],a=e[2];if(r.onpipe){var o=b[t]=new Guacamole.InputStream(r,t);r.onpipe(o,n,a)}else r.sendAck(t,"Named pipes unsupported",256)},png:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=parseInt(e[2]),r=parseInt(e[3]),o=e[4];v.setChannelMask(n,t),v.draw(n,a,r,"data:image/png;base64,"+o)},pop:function(e){var t=k(parseInt(e[0]));v.pop(t)},push:function(e){var t=k(parseInt(e[0]));v.push(t)},rect:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]);v.rect(t,n,a,r,o)},reset:function(e){var t=k(parseInt(e[0]));v.reset(t)},set:function(e){var t=k(parseInt(e[0])),n=e[1],a=e[2],r=E[n];r&&r(t,a)},shade:function(e){var t=parseInt(e[0]),n=parseInt(e[1]);if(t>=0){var a=k(t);a.shade(n)}},size:function(e){var t=parseInt(e[0]),n=k(t),a=parseInt(e[1]),r=parseInt(e[2]);v.resize(n,a,r)},start:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]);v.moveTo(t,n,a)},sync:function(n){var a=parseInt(n[0]);v.flush(function(){for(var t in y){var n=y[t];n&&n.sync()}a!==f&&(e.sendMessage("sync",a),f=a)}),d===s&&t(u),r.onsync&&r.onsync(a)},transfer:function(e){var t=k(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),r=parseInt(e[3]),o=parseInt(e[4]),i=parseInt(e[5]),s=k(parseInt(e[6])),u=parseInt(e[7]),l=parseInt(e[8]);3===i?v.put(t,n,a,r,o,s,u,l):5!==i&&v.transfer(t,n,a,r,o,s,u,l,Guacamole.Client.DefaultTransferFunction[i])},transform:function(e){var t=k(parseInt(e[0])),n=parseFloat(e[1]),a=parseFloat(e[2]),r=parseFloat(e[3]),o=parseFloat(e[4]),i=parseFloat(e[5]),s=parseFloat(e[6]);v.transform(t,n,a,r,o,i,s)},undefine:function(e){var t=parseInt(e[0]),n=I[t];n&&n.onundefine&&n.onundefine()},video:function(e){var t=parseInt(e[0]),n=k(parseInt(e[1])),a=e[2],o=b[t]=new Guacamole.InputStream(r,t),i=null;r.onvideo&&(i=r.onvideo(o,n,a)),i||(i=Guacamole.VideoPlayer.getInstance(o,n,a)),i?(w[t]=i,r.sendAck(t,"OK",0)):r.sendAck(t,"BAD TYPE",783)}};e.oninstruction=function(e,t){var n=C[e];n&&n(t)},this.disconnect=function(){d!=c&&d!=l&&(t(l),h&&window.clearInterval(h),e.sendMessage("disconnect"),e.disconnect(),t(c))},this.connect=function(n){t(i);try{e.connect(n)}catch(e){throw t(o),e}h=window.setInterval(function(){e.sendMessage("sync",f)},5e3),t(s)}},Guacamole.Client.DefaultTransferFunction={0:function(e,t){t.red=t.green=t.blue=0},15:function(e,t){t.red=t.green=t.blue=255},3:function(e,t){t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha},5:function(e,t){},12:function(e,t){t.red=255&~e.red,t.green=255&~e.green,t.blue=255&~e.blue,t.alpha=e.alpha},10:function(e,t){t.red=255&~t.red,t.green=255&~t.green,t.blue=255&~t.blue},1:function(e,t){t.red=e.red&t.red,t.green=e.green&t.green,t.blue=e.blue&t.blue},14:function(e,t){t.red=255&~(e.red&t.red),t.green=255&~(e.green&t.green),t.blue=255&~(e.blue&t.blue)},7:function(e,t){t.red=e.red|t.red,t.green=e.green|t.green,t.blue=e.blue|t.blue},8:function(e,t){t.red=255&~(e.red|t.red),t.green=255&~(e.green|t.green),t.blue=255&~(e.blue|t.blue)},6:function(e,t){t.red=e.red^t.red,t.green=e.green^t.green,t.blue=e.blue^t.blue},9:function(e,t){t.red=255&~(e.red^t.red),t.green=255&~(e.green^t.green),t.blue=255&~(e.blue^t.blue)},4:function(e,t){t.red=255&(~e.red&t.red),t.green=255&(~e.green&t.green),t.blue=255&(~e.blue&t.blue)},13:function(e,t){t.red=255&(~e.red|t.red),t.green=255&(~e.green|t.green),t.blue=255&(~e.blue|t.blue)},2:function(e,t){t.red=255&(e.red&~t.red),t.green=255&(e.green&~t.green),t.blue=255&(e.blue&~t.blue)},11:function(e,t){t.red=255&(e.red|~t.red),t.green=255&(e.green|~t.green),t.blue=255&(e.blue|~t.blue)}};var Guacamole=Guacamole||{};Guacamole.DataURIReader=function(e,t){var n=this,a="data:"+t+";base64,";e.onblob=function(e){a+=e},e.onend=function(){n.onend&&n.onend()},this.getURI=function(){return a},this.onend=null};var Guacamole=Guacamole||{};Guacamole.Display=function(){function e(){for(var e=0;e<h.length;){var t=h[e];if(!t.isReady())break;t.flush(),e++}h.splice(0,e)}function t(e,t){this.isReady=function(){for(var e=0;e<t.length;e++)if(t[e].blocked)return!1;return!0},this.flush=function(){for(var n=0;n<t.length;n++)t[n].execute();e&&e()}}function n(t,n){var a=this;this.blocked=n,this.unblock=function(){a.blocked&&(a.blocked=!1,e())},this.execute=function(){t&&t()}}function a(e,t){var a=new n(e,t);return f.push(a),a}var r=this,o=0,i=0,s=1,u=document.createElement("div");u.style.position="relative",u.style.width=o+"px",u.style.height=i+"px",u.style.transformOrigin=u.style.webkitTransformOrigin=u.style.MozTransformOrigin=u.style.OTransformOrigin=u.style.msTransformOrigin="0 0";var l=new Guacamole.Display.VisibleLayer(o,i),c=new Guacamole.Display.VisibleLayer(0,0);c.setChannelMask(Guacamole.Layer.SRC),u.appendChild(l.getElement()),u.appendChild(c.getElement());var d=document.createElement("div");d.style.position="relative",d.style.width=o*s+"px",d.style.height=i*s+"px",d.appendChild(u),this.cursorHotspotX=0,this.cursorHotspotY=0,this.cursorX=0,this.cursorY=0,this.onresize=null,this.oncursor=null;var f=[],h=[];this.getElement=function(){return d},this.getWidth=function(){return o},this.getHeight=function(){return i},this.getDefaultLayer=function(){return l},this.getCursorLayer=function(){return c},this.createLayer=function(){var e=new Guacamole.Display.VisibleLayer(o,i);return e.move(l,0,0,0),e},this.createBuffer=function(){var e=new Guacamole.Layer(0,0);return e.autosize=1,e},this.flush=function(n){h.push(new t(n,f)),f=[],e()},this.setCursor=function(e,t,n,o,i,s,u){a(function(){r.cursorHotspotX=e,r.cursorHotspotY=t,c.resize(s,u),c.copy(n,o,i,s,u,0,0),r.moveCursor(r.cursorX,r.cursorY),r.oncursor&&r.oncursor(c.getCanvas(),e,t)})},this.showCursor=function(e){var t=c.getElement(),n=t.parentNode;e===!1?n&&n.removeChild(t):n!==u&&u.appendChild(t)},this.moveCursor=function(e,t){c.translate(e-r.cursorHotspotX,t-r.cursorHotspotY),r.cursorX=e,r.cursorY=t},this.resize=function(e,t,n){a(function(){e.resize(t,n),e===l&&(o=t,i=n,u.style.width=o+"px",u.style.height=i+"px",d.style.width=o*s+"px",d.style.height=i*s+"px",r.onresize&&r.onresize(t,n))})},this.drawImage=function(e,t,n,r){a(function(){e.drawImage(t,n,r)})},this.drawBlob=function(e,t,n,r){var o=URL.createObjectURL(r),i=a(function(){e.drawImage(t,n,s),URL.revokeObjectURL(o)},!0),s=new Image;s.onload=i.unblock,s.src=o},this.draw=function(e,t,n,r){var o=a(function(){e.drawImage(t,n,i)},!0),i=new Image;i.onload=o.unblock,i.src=r},this.play=function(e,t,n,r){var o=document.createElement("video");o.type=t,o.src=r,o.addEventListener("play",function(){function t(){e.drawImage(0,0,o),o.ended||window.setTimeout(t,20)}t()},!1),a(o.play)},this.transfer=function(e,t,n,r,o,i,s,u,l){a(function(){i.transfer(e,t,n,r,o,s,u,l)})},this.put=function(e,t,n,r,o,i,s,u){a(function(){i.put(e,t,n,r,o,s,u)})},this.copy=function(e,t,n,r,o,i,s,u){a(function(){i.copy(e,t,n,r,o,s,u)})},this.moveTo=function(e,t,n){a(function(){e.moveTo(t,n)})},this.lineTo=function(e,t,n){a(function(){e.lineTo(t,n)})},this.arc=function(e,t,n,r,o,i,s){a(function(){e.arc(t,n,r,o,i,s)})},this.curveTo=function(e,t,n,r,o,i,s){a(function(){e.curveTo(t,n,r,o,i,s)})},this.close=function(e){a(function(){e.close()})},this.rect=function(e,t,n,r,o){a(function(){e.rect(t,n,r,o)})},this.clip=function(e){a(function(){e.clip()})},this.strokeColor=function(e,t,n,r,o,i,s,u){a(function(){e.strokeColor(t,n,r,o,i,s,u)})},this.fillColor=function(e,t,n,r,o){a(function(){e.fillColor(t,n,r,o)})},this.strokeLayer=function(e,t,n,r,o){a(function(){e.strokeLayer(t,n,r,o)})},this.fillLayer=function(e,t){a(function(){e.fillLayer(t)})},this.push=function(e){a(function(){e.push()})},this.pop=function(e){a(function(){e.pop()})},this.reset=function(e){a(function(){e.reset()})},this.setTransform=function(e,t,n,r,o,i,s){a(function(){e.setTransform(t,n,r,o,i,s)})},this.transform=function(e,t,n,r,o,i,s){a(function(){e.transform(t,n,r,o,i,s)})},this.setChannelMask=function(e,t){a(function(){e.setChannelMask(t)})},this.setMiterLimit=function(e,t){a(function(){e.setMiterLimit(t)})},this.scale=function(e){u.style.transform=u.style.WebkitTransform=u.style.MozTransform=u.style.OTransform=u.style.msTransform="scale("+e+","+e+")",s=e,d.style.width=o*s+"px",d.style.height=i*s+"px"},this.getScale=function(){return s},this.flatten=function(){function e(e){var t=[];for(var n in e.children)t.push(e.children[n]);return t.sort(function(e,t){var n=e.z-t.z;if(0!==n)return n;var a=e.getElement(),r=t.getElement(),o=r.compareDocumentPosition(a);return o&Node.DOCUMENT_POSITION_PRECEDING?-1:o&Node.DOCUMENT_POSITION_FOLLOWING?1:0}),t}function t(n,r,o){if(n.width>0&&n.height>0){var i=a.globalAlpha;a.globalAlpha*=n.alpha/255,a.drawImage(n.getCanvas(),r,o);for(var s=e(n),u=0;u<s.length;u++){var l=s[u];t(l,r+l.x,o+l.y)}a.globalAlpha=i}}var n=document.createElement("canvas");n.width=l.width,n.height=l.height;var a=n.getContext("2d");return t(l,0,0),n}},Guacamole.Display.VisibleLayer=function(e,t){Guacamole.Layer.apply(this,[e,t]);var n=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++,this.alpha=255,this.x=0,this.y=0,this.z=0,this.matrix=[1,0,0,1,0,0],this.parent=null,this.children={};var a=n.getCanvas();a.style.position="absolute",a.style.left="0px",a.style.top="0px";var r=document.createElement("div");r.appendChild(a),r.style.width=e+"px",r.style.height=t+"px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.overflow="hidden";var o=this.resize;this.resize=function(e,t){r.style.width=e+"px",r.style.height=t+"px",o(e,t)},this.getElement=function(){return r};var i="translate(0px, 0px)",s="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(e,t){n.x=e,n.y=t,i="translate("+e+"px,"+t+"px)",r.style.transform=r.style.WebkitTransform=r.style.MozTransform=r.style.OTransform=r.style.msTransform=i+" "+s},this.move=function(e,t,a,o){if(n.parent!==e){n.parent&&delete n.parent.children[n.__unique_id],n.parent=e,e.children[n.__unique_id]=n;var i=e.getElement();i.appendChild(r)}n.translate(t,a),n.z=o,r.style.zIndex=o},this.shade=function(e){n.alpha=e,r.style.opacity=e/255},this.dispose=function(){n.parent&&(delete n.parent.children[n.__unique_id],n.parent=null),r.parentNode&&r.parentNode.removeChild(r)},this.distort=function(e,t,a,o,u,l){n.matrix=[e,t,a,o,u,l],s="matrix("+e+","+t+","+a+","+o+","+u+","+l+")",r.style.transform=r.style.WebkitTransform=r.style.MozTransform=r.style.OTransform=r.style.msTransform=i+" "+s}},Guacamole.Display.VisibleLayer.__next_id=0;var Guacamole=Guacamole||{};Guacamole.InputStream=function(e,t){var n=this;this.index=t,this.onblob=null,this.onend=null,this.sendAck=function(t,a){e.sendAck(n.index,t,a)}};var Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var e=this,t=[];this.next_int=0,this.next=function(){return t.length>0?t.shift():e.next_int++},this.free=function(e){t.push(e)}};var Guacamole=Guacamole||{};Guacamole.JSONReader=function(e){var t=this,n=new Guacamole.StringReader(e),a="";this.getLength=function(){return a.length},this.getJSON=function(){return JSON.parse(a)},n.ontext=function(e){a+=e,t.onprogress&&t.onprogress(e.length)},n.onend=function(){t.onend&&t.onend()},this.onprogress=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.Keyboard=function(e){function t(e,t,n){if(!e)return null;var r,o=e.indexOf("U+");if(o>=0){var i=e.substring(o+2);r=String.fromCharCode(parseInt(i,16))}else{if(1!==e.length||3===t)return w(h[e],t);r=e}n===!0?r=r.toUpperCase():n===!1&&(r=r.toLowerCase());var s=r.charCodeAt(0);return a(s)}function n(e){return e<=31||e>=127&&e<=159}function a(e){return n(e)?65280|e:e>=0&&e<=255?e:e>=256&&e<=1114111?16777216|e:null}function r(e,t){return w(f[e],t)}function o(){var e=G();if(!e)return!1;var t;do t=e,e=G();while(null!==e);return t.defaultPrevented}var i=this;this.onkeydown=null,this.onkeyup=null;var s=function(){var e=this;this.timestamp=(new Date).getTime(),this.defaultPrevented=!1,this.keysym=null,this.reliable=!1,this.getAge=function(){return(new Date).getTime()-e.timestamp}},u=function(e,n,a,o){s.apply(this),this.keyCode=e,this.keyIdentifier=n,this.key=a,this.location=o,this.keysym=t(a,o)||r(e,o),this.keysym&&(this.reliable=!0),!this.keysym&&S(e,n)&&(this.keysym=t(n,o,i.modifiers.shift));var u=!(i.modifiers.ctrl||navigator&&navigator.platform&&navigator.platform.match(/^mac/i)),l=!i.modifiers.alt;(l&&i.modifiers.ctrl||u&&i.modifiers.alt||i.modifiers.meta||i.modifiers.hyper)&&(this.reliable=!0),v[e]=this.keysym};u.prototype=new s;var l=function(e){s.apply(this),this.charCode=e,this.keysym=a(e),this.reliable=!0};l.prototype=new s;var c=function(e,n,a,o){s.apply(this),this.keyCode=e,this.keyIdentifier=n,this.key=a,this.location=o,this.keysym=v[e]||r(e,o)||t(a,o),this.reliable=!0};c.prototype=new s;var d=[],f={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65515],92:[65383],93:null,96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},h={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]},m={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};this.modifiers=new Guacamole.Keyboard.ModifierState,this.pressed={};var p={},v={},g=null,y=null,w=function(e,t){return e?e[t]||e[0]:null},S=function(e,t){if(!t)return!1;var n=t.indexOf("U+");if(n===-1)return!0;var a=parseInt(t.substring(n+2),16);return e!==a||(e>=65&&e<=90||e>=48&&e<=57)};this.press=function(e){if(null!==e){if(!i.pressed[e]&&(i.pressed[e]=!0,i.onkeydown)){var t=i.onkeydown(e);return p[e]=t,window.clearTimeout(g),window.clearInterval(y),m[e]||(g=window.setTimeout(function(){y=window.setInterval(function(){i.onkeyup(e),i.onkeydown(e)},50)},500)),t}return p[e]||!1}},this.release=function(e){i.pressed[e]&&(delete i.pressed[e],window.clearTimeout(g),window.clearInterval(y),null!==e&&i.onkeyup&&i.onkeyup(e))},this.reset=function(){for(var e in i.pressed)i.release(parseInt(e));d=[]};var b=function(e){var t=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(e);i.modifiers.alt&&t.alt===!1&&(i.release(65513),i.release(65514),i.release(65027)),i.modifiers.shift&&t.shift===!1&&(i.release(65505),i.release(65506)),i.modifiers.ctrl&&t.ctrl===!1&&(i.release(65507),i.release(65508)),i.modifiers.meta&&t.meta===!1&&(i.release(65511),i.release(65512)),i.modifiers.hyper&&t.hyper===!1&&(i.release(65515),i.release(65516)),i.modifiers=t},I=function(e){i.modifiers.ctrl&&i.modifiers.alt&&(e>=65&&e<=90||e>=97&&e<=122||(e<=255||16777216===(4278190080&e))&&(i.release(65507),i.release(65508),i.release(65513),i.release(65514)))},G=function(){var e=d[0];if(!e)return null;if(!(e instanceof u)){if(e instanceof c){var t=e.keysym;return t?(i.release(t),e.defaultPrevented=!0,d.shift()):(i.reset(),e)}return d.shift()}var t=null,n=[];if(e.reliable?(t=e.keysym,n=d.splice(0,1)):d[1]instanceof l?(t=d[1].keysym,n=d.splice(0,2)):d[1]&&(t=e.keysym,n=d.splice(0,1)),n.length>0){if(t){I(t);var a=!i.press(t);v[e.keyCode]=t,i.modifiers.meta&&65511!==t&&65512!==t&&i.release(t);for(var r=0;r<n.length;r++)n[r].defaultPrevented=a}return e}return null},T=function(e){return"location"in e?e.location:"keyLocation"in e?e.keyLocation:0};e.addEventListener("keydown",function(e){if(i.onkeydown){var t;if(window.event?t=window.event.keyCode:e.which&&(t=e.which),b(e),229!==t){var n=new u(t,e.keyIdentifier,e.key,T(e));d.push(n),o()&&e.preventDefault()}}},!0),e.addEventListener("keypress",function(e){if(i.onkeydown||i.onkeyup){var t;window.event?t=window.event.keyCode:e.which&&(t=e.which),b(e);var n=new l(t);d.push(n),o()&&e.preventDefault()}},!0),e.addEventListener("keyup",function(e){if(i.onkeyup){e.preventDefault();var t;window.event?t=window.event.keyCode:e.which&&(t=e.which),b(e);var n=new c(t,e.keyIdentifier,e.key,T(e));d.push(n),o()}},!0)},Guacamole.Keyboard.ModifierState=function(){this.shift=!1,this.ctrl=!1,this.alt=!1,this.meta=!1,this.hyper=!1},Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(e){var t=new Guacamole.Keyboard.ModifierState;return t.shift=e.shiftKey,t.ctrl=e.ctrlKey,t.alt=e.altKey,t.meta=e.metaKey,e.getModifierState&&(t.hyper=e.getModifierState("OS")||e.getModifierState("Super")||e.getModifierState("Hyper")||e.getModifierState("Win")),t};var Guacamole=Guacamole||{};Guacamole.Layer=function(e,t){function n(e,t){var n=null;if(0!==r.width&&0!==r.height){n=document.createElement("canvas"),n.width=r.width,n.height=r.height;var a=n.getContext("2d");a.drawImage(o,0,0,r.width,r.height,0,0,r.width,r.height)}var s=i.globalCompositeOperation;o.width=e,o.height=t,n&&i.drawImage(n,0,0,r.width,r.height,0,0,r.width,r.height),i.globalCompositeOperation=s,r.width=e,r.height=t,u=0,i.save()}function a(e,t,n,a){var o,i=n+e,s=a+t;o=i>r.width?i:r.width;var u;u=s>r.height?s:r.height,r.resize(o,u)}var r=this,o=document.createElement("canvas"),i=o.getContext("2d");i.save();var s=!0,u=0,l={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};this.autosize=!1,this.width=e,this.height=t,this.getCanvas=function(){return o},this.resize=function(e,t){e===r.width&&t===r.height||n(e,t)},this.drawImage=function(e,t,n){r.autosize&&a(e,t,n.width,n.height),i.drawImage(n,e,t)},this.transfer=function(e,t,n,o,s,u,l,c){var d=e.getCanvas();if(!(t>=d.width||n>=d.height)&&(t+o>d.width&&(o=d.width-t),n+s>d.height&&(s=d.height-n),0!==o&&0!==s)){r.autosize&&a(u,l,o,s);for(var f=e.getCanvas().getContext("2d").getImageData(t,n,o,s),h=i.getImageData(u,l,o,s),m=0;m<o*s*4;m+=4){var p=new Guacamole.Layer.Pixel(f.data[m],f.data[m+1],f.data[m+2],f.data[m+3]),v=new Guacamole.Layer.Pixel(h.data[m],h.data[m+1],h.data[m+2],h.data[m+3]);c(p,v),h.data[m]=v.red,h.data[m+1]=v.green,h.data[m+2]=v.blue,h.data[m+3]=v.alpha}i.putImageData(h,u,l)}},this.put=function(e,t,n,o,s,u,l){var c=e.getCanvas();if(!(t>=c.width||n>=c.height)&&(t+o>c.width&&(o=c.width-t),n+s>c.height&&(s=c.height-n),0!==o&&0!==s)){r.autosize&&a(u,l,o,s);var d=e.getCanvas().getContext("2d").getImageData(t,n,o,s);i.putImageData(d,u,l)}},this.copy=function(e,t,n,o,s,u,l){var c=e.getCanvas();t>=c.width||n>=c.height||(t+o>c.width&&(o=c.width-t),n+s>c.height&&(s=c.height-n),0!==o&&0!==s&&(r.autosize&&a(u,l,o,s),i.drawImage(c,t,n,o,s,u,l,o,s)))},this.moveTo=function(e,t){s&&(i.beginPath(),s=!1),r.autosize&&a(e,t,0,0),i.moveTo(e,t)},this.lineTo=function(e,t){s&&(i.beginPath(),s=!1),r.autosize&&a(e,t,0,0),i.lineTo(e,t)},this.arc=function(e,t,n,o,u,l){s&&(i.beginPath(),s=!1),r.autosize&&a(e,t,0,0),i.arc(e,t,n,o,u,l)},this.curveTo=function(e,t,n,o,u,l){s&&(i.beginPath(),s=!1),r.autosize&&a(u,l,0,0),i.bezierCurveTo(e,t,n,o,u,l)},this.close=function(){i.closePath(),s=!0},
this.rect=function(e,t,n,o){s&&(i.beginPath(),s=!1),r.autosize&&a(e,t,n,o),i.rect(e,t,n,o)},this.clip=function(){i.clip(),s=!0},this.strokeColor=function(e,t,n,a,r,o,u){i.lineCap=e,i.lineJoin=t,i.lineWidth=n,i.strokeStyle="rgba("+a+","+r+","+o+","+u/255+")",i.stroke(),s=!0},this.fillColor=function(e,t,n,a){i.fillStyle="rgba("+e+","+t+","+n+","+a/255+")",i.fill(),s=!0},this.strokeLayer=function(e,t,n,a){i.lineCap=e,i.lineJoin=t,i.lineWidth=n,i.strokeStyle=i.createPattern(a.getCanvas(),"repeat"),i.stroke(),s=!0},this.fillLayer=function(e){i.fillStyle=i.createPattern(e.getCanvas(),"repeat"),i.fill(),s=!0},this.push=function(){i.save(),u++},this.pop=function(){u>0&&(i.restore(),u--)},this.reset=function(){for(;u>0;)i.restore(),u--;i.restore(),i.save(),i.beginPath(),s=!1},this.setTransform=function(e,t,n,a,r,o){i.setTransform(e,t,n,a,r,o)},this.transform=function(e,t,n,a,r,o){i.transform(e,t,n,a,r,o)},this.setChannelMask=function(e){i.globalCompositeOperation=l[e]},this.setMiterLimit=function(e){i.miterLimit=e},o.width=e,o.height=t,o.style.zIndex=-1},Guacamole.Layer.ROUT=2,Guacamole.Layer.ATOP=6,Guacamole.Layer.XOR=10,Guacamole.Layer.ROVER=11,Guacamole.Layer.OVER=14,Guacamole.Layer.PLUS=15,Guacamole.Layer.RIN=1,Guacamole.Layer.IN=4,Guacamole.Layer.OUT=8,Guacamole.Layer.RATOP=9,Guacamole.Layer.SRC=12,Guacamole.Layer.Pixel=function(e,t,n,a){this.red=e,this.green=t,this.blue=n,this.alpha=a};var Guacamole=Guacamole||{};Guacamole.Mouse=function(e){function t(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function n(){o=r.touchMouseThreshold}function a(e){var n=e.deltaY||-e.wheelDeltaY||-e.wheelDelta;if(n?1===e.deltaMode?n=e.deltaY*r.PIXELS_PER_LINE:2===e.deltaMode&&(n=e.deltaY*r.PIXELS_PER_PAGE):n=e.detail*r.PIXELS_PER_LINE,i+=n,i<=-r.scrollThreshold){do r.onmousedown&&(r.currentState.up=!0,r.onmousedown(r.currentState)),r.onmouseup&&(r.currentState.up=!1,r.onmouseup(r.currentState)),i+=r.scrollThreshold;while(i<=-r.scrollThreshold);i=0}if(i>=r.scrollThreshold){do r.onmousedown&&(r.currentState.down=!0,r.onmousedown(r.currentState)),r.onmouseup&&(r.currentState.down=!1,r.onmouseup(r.currentState)),i-=r.scrollThreshold;while(i>=r.scrollThreshold);i=0}t(e)}var r=this;this.touchMouseThreshold=3,this.scrollThreshold=53,this.PIXELS_PER_LINE=18,this.PIXELS_PER_PAGE=16*this.PIXELS_PER_LINE,this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,this.onmouseout=null;var o=0,i=0;e.addEventListener("contextmenu",function(e){t(e)},!1),e.addEventListener("mousemove",function(n){return t(n),o?void o--:(r.currentState.fromClientPosition(e,n.clientX,n.clientY),void(r.onmousemove&&r.onmousemove(r.currentState)))},!1),e.addEventListener("mousedown",function(e){if(t(e),!o){switch(e.button){case 0:r.currentState.left=!0;break;case 1:r.currentState.middle=!0;break;case 2:r.currentState.right=!0}r.onmousedown&&r.onmousedown(r.currentState)}},!1),e.addEventListener("mouseup",function(e){if(t(e),!o){switch(e.button){case 0:r.currentState.left=!1;break;case 1:r.currentState.middle=!1;break;case 2:r.currentState.right=!1}r.onmouseup&&r.onmouseup(r.currentState)}},!1),e.addEventListener("mouseout",function(n){n||(n=window.event);for(var a=n.relatedTarget||n.toElement;a;){if(a===e)return;a=a.parentNode}t(n),(r.currentState.left||r.currentState.middle||r.currentState.right)&&(r.currentState.left=!1,r.currentState.middle=!1,r.currentState.right=!1,r.onmouseup&&r.onmouseup(r.currentState)),r.onmouseout&&r.onmouseout()},!1),e.addEventListener("selectstart",function(e){t(e)},!1),e.addEventListener("touchmove",n,!1),e.addEventListener("touchstart",n,!1),e.addEventListener("touchend",n,!1),e.addEventListener("DOMMouseScroll",a,!1),e.addEventListener("mousewheel",a,!1),e.addEventListener("wheel",a,!1);var s=function(){var e=document.createElement("div");if(!("cursor"in e.style))return!1;try{e.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(e){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(e.style.cursor||"")}();this.setCursor=function(t,n,a){if(s){var r=t.toDataURL("image/png");return e.style.cursor="url("+r+") "+n+" "+a+", auto",!0}return!1}},Guacamole.Mouse.State=function(e,t,n,a,r,o,i){var s=this;this.x=e,this.y=t,this.left=n,this.middle=a,this.right=r,this.up=o,this.down=i,this.fromClientPosition=function(e,t,n){s.x=t-e.offsetLeft,s.y=n-e.offsetTop;for(var a=e.offsetParent;a&&a!==document.body;)s.x-=a.offsetLeft-a.scrollLeft,s.y-=a.offsetTop-a.scrollTop,a=a.offsetParent;if(a){var r=document.body.scrollLeft||document.documentElement.scrollLeft,o=document.body.scrollTop||document.documentElement.scrollTop;s.x-=a.offsetLeft-r,s.y-=a.offsetTop-o}}},Guacamole.Mouse.Touchpad=function(e){var t=this;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=10*(window.devicePixelRatio||1),this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null;var n=0,a=0,r=0,o=0,i=0,s={1:"left",2:"right",3:"middle"},u=!1,l=null;e.addEventListener("touchend",function(e){if(e.preventDefault(),u&&0===e.touches.length){var a=(new Date).getTime(),r=s[n];t.currentState[r]&&(t.currentState[r]=!1,t.onmouseup&&t.onmouseup(t.currentState),l&&(window.clearTimeout(l),l=null)),a-o<=t.clickTimingThreshold&&i<t.clickMoveThreshold&&(t.currentState[r]=!0,t.onmousedown&&t.onmousedown(t.currentState),l=window.setTimeout(function(){t.currentState[r]=!1,t.onmouseup&&t.onmouseup(t.currentState),u=!1},t.clickTimingThreshold)),l||(u=!1)}},!1),e.addEventListener("touchstart",function(e){if(e.preventDefault(),n=Math.min(e.touches.length,3),l&&(window.clearTimeout(l),l=null),!u){u=!0;var t=e.touches[0];a=t.clientX,r=t.clientY,o=(new Date).getTime(),i=0}},!1),e.addEventListener("touchmove",function(s){s.preventDefault();var u=s.touches[0],l=u.clientX-a,c=u.clientY-r;if(i+=Math.abs(l)+Math.abs(c),1===n){var d=i/((new Date).getTime()-o),f=1+d;t.currentState.x+=l*f,t.currentState.y+=c*f,t.currentState.x<0?t.currentState.x=0:t.currentState.x>=e.offsetWidth&&(t.currentState.x=e.offsetWidth-1),t.currentState.y<0?t.currentState.y=0:t.currentState.y>=e.offsetHeight&&(t.currentState.y=e.offsetHeight-1),t.onmousemove&&t.onmousemove(t.currentState),a=u.clientX,r=u.clientY}else if(2===n&&Math.abs(c)>=t.scrollThreshold){var h;h=c>0?"down":"up",t.currentState[h]=!0,t.onmousedown&&t.onmousedown(t.currentState),t.currentState[h]=!1,t.onmouseup&&t.onmouseup(t.currentState),a=u.clientX,r=u.clientY}},!1)},Guacamole.Mouse.Touchscreen=function(e){function t(e){u.currentState[e]||(u.currentState[e]=!0,u.onmousedown&&u.onmousedown(u.currentState))}function n(e){u.currentState[e]&&(u.currentState[e]=!1,u.onmouseup&&u.onmouseup(u.currentState))}function a(e){t(e),n(e)}function r(t,n){u.currentState.fromClientPosition(e,t,n),u.onmousemove&&u.onmousemove(u.currentState)}function o(e){var t=e.touches[0]||e.changedTouches[0],n=t.clientX-c,a=t.clientY-d;return Math.sqrt(n*n+a*a)>=u.clickMoveThreshold}function i(e){var t=e.touches[0];l=!0,c=t.clientX,d=t.clientY}function s(){window.clearTimeout(f),window.clearTimeout(h),l=!1}var u=this,l=!1,c=null,d=null,f=null,h=null;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=16*(window.devicePixelRatio||1),this.longPressThreshold=500,this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,e.addEventListener("touchend",function(e){if(l){if(0!==e.touches.length||1!==e.changedTouches.length)return void s();if(window.clearTimeout(h),n("left"),!o(e)&&(e.preventDefault(),!u.currentState.left)){var a=e.changedTouches[0];r(a.clientX,a.clientY),t("left"),f=window.setTimeout(function(){n("left"),s()},u.clickTimingThreshold)}}},!1),e.addEventListener("touchstart",function(e){return 1!==e.touches.length?void s():(e.preventDefault(),i(e),window.clearTimeout(f),void(h=window.setTimeout(function(){var t=e.touches[0];r(t.clientX,t.clientY),a("right"),s()},u.longPressThreshold)))},!1),e.addEventListener("touchmove",function(e){if(l){if(o(e)&&window.clearTimeout(h),1!==e.touches.length)return void s();if(u.currentState.left){e.preventDefault();var t=e.touches[0];r(t.clientX,t.clientY)}}},!1)};var Guacamole=Guacamole||{},Guacamole=Guacamole||{};Guacamole.Object=function(e,t){var n=this,a={},r=function(e){var t=a[e];if(!t)return null;var n=t.shift();return 0===t.length&&delete a[e],n},o=function(e,t){var n=a[e];n||(n=[],a[e]=n),n.push(t)};this.index=t,this.onbody=function(e,t,n){var a=r(n);a&&a(e,t)},this.onundefine=null,this.requestInputStream=function(t,a){a&&o(t,a),e.requestObjectInputStream(n.index,t)},this.createOutputStream=function(t,a){return e.createObjectOutputStream(n.index,t,a)}},Guacamole.Object.ROOT_STREAM="/",Guacamole.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json";var Guacamole=Guacamole||{};Guacamole.OnScreenKeyboard=function(e){var t=this,n={},a={},r=[],o=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},i=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(/([^ ]+)[ ]*/g,function(e,n){return n===t?"":e})},s=0,u=function(e,t,n,a){this.width=t,this.height=n,this.scale=function(r){e.style.width=t*r+"px",e.style.height=n*r+"px",a&&(e.style.lineHeight=n*r+"px",e.style.fontSize=r+"px")}},l=function(e){for(var t=0;t<e.length;t++){var a=e[t];if(!(a in n))return!1}return!0},c=function(e){var n=t.keys[e];if(!n)return null;for(var a=n.length-1;a>=0;a--){var r=n[a];if(l(r.requires))return r}return null},d=function(e,r){if(!a[e]){o(r,"guac-keyboard-pressed");var s=c(e);if(s.modifier){var u="guac-keyboard-modifier-"+v(s.modifier),l=n[s.modifier];l?(i(h,u),delete n[s.modifier],t.onkeyup&&t.onkeyup(l)):(o(h,u),n[s.modifier]=s.keysym,t.onkeydown&&t.onkeydown(s.keysym))}else t.onkeydown&&t.onkeydown(s.keysym);a[e]=!0}},f=function(e,n){if(a[e]){i(n,"guac-keyboard-pressed");var r=c(e);!r.modifier&&t.onkeyup&&t.onkeyup(r.keysym),a[e]=!1}},h=document.createElement("div");h.className="guac-keyboard",h.onselectstart=h.onmousemove=h.onmouseup=h.onmousedown=function(e){return s&&s--,e.stopPropagation(),!1},this.touchMouseThreshold=3,this.onkeydown=null,this.onkeyup=null,this.layout=new Guacamole.OnScreenKeyboard.Layout(e),this.getElement=function(){return h},this.resize=function(e){for(var n=Math.floor(10*e/t.layout.width)/10,a=0;a<r.length;a++){var o=r[a];o.scale(n)}};var m=function(e,t){if(t instanceof Array){for(var n=[],a=0;a<t.length;a++)n.push(new Guacamole.OnScreenKeyboard.Key(t[a],e));return n}return"number"==typeof t?[new Guacamole.OnScreenKeyboard.Key({name:e,keysym:t})]:"string"==typeof t?[new Guacamole.OnScreenKeyboard.Key({name:e,title:t})]:[new Guacamole.OnScreenKeyboard.Key(t,e)]},p=function(t){var n={};for(var a in e.keys)n[a]=m(a,t[a]);return n};this.keys=p(e.keys);var v=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase();return t},g=function e(n,a,i){var l,c=document.createElement("div");if(i&&o(c,"guac-keyboard-"+v(i)),a instanceof Array)for(o(c,"guac-keyboard-group"),l=0;l<a.length;l++)e(c,a[l]);else if(a instanceof Object){o(c,"guac-keyboard-group");var h=Object.keys(a).sort();for(l=0;l<h.length;l++){var i=h[l];e(c,a[i],i)}}else if("number"==typeof a)o(c,"guac-keyboard-gap"),r.push(new u(c,a,a));else if("string"==typeof a){var m=a;1===m.length&&(m="0x"+m.charCodeAt(0).toString(16)),o(c,"guac-keyboard-key-container");var p=document.createElement("div");p.className="guac-keyboard-key guac-keyboard-key-"+v(m);var g=t.keys[a];if(g)for(l=0;l<g.length;l++){var y=g[l],w=document.createElement("div");w.className="guac-keyboard-cap",w.textContent=y.title;for(var S=0;S<y.requires.length;S++){var b=y.requires[S];o(w,"guac-keyboard-requires-"+v(b)),o(p,"guac-keyboard-uses-"+v(b))}p.appendChild(w)}c.appendChild(p),r.push(new u(c,t.layout.keyWidths[a]||1,1,!0));var I=function(e){e.preventDefault(),s=t.touchMouseThreshold,d(a,p)},G=function(e){e.preventDefault(),s=t.touchMouseThreshold,f(a,p)},T=function(e){e.preventDefault(),0===s&&d(a,p)},k=function(e){e.preventDefault(),0===s&&f(a,p)};p.addEventListener("touchstart",I,!0),p.addEventListener("touchend",G,!0),p.addEventListener("mousedown",T,!0),p.addEventListener("mouseup",k,!0),p.addEventListener("mouseout",k,!0)}n.appendChild(c)};g(h,e.layout)},Guacamole.OnScreenKeyboard.Layout=function(e){this.language=e.language,this.type=e.type,this.keys=e.keys,this.layout=e.layout,this.width=e.width,this.keyWidths=e.keyWidths||{}},Guacamole.OnScreenKeyboard.Key=function(e,t){this.name=t||e.name,this.title=e.title||this.name,this.keysym=e.keysym||function(e){if(!e||1!==e.length)return null;var t=e.charCodeAt(0);return t>=0&&t<=255?t:t>=256&&t<=1114111?16777216|t:null}(this.title),this.modifier=e.modifier,this.requires=e.requires||[]};var Guacamole=Guacamole||{};Guacamole.OutputStream=function(e,t){var n=this;this.index=t,this.onack=null,this.sendBlob=function(t){e.sendBlob(n.index,t)},this.sendEnd=function(){e.endStream(n.index)}};var Guacamole=Guacamole||{};Guacamole.Parser=function(){var e=this,t="",n=[],a=-1,r=0;this.receive=function(o){for(r>4096&&a>=r&&(t=t.substring(r),a-=r,r=0),t+=o;a<t.length;){if(a>=r){var i=t.substring(r,a),s=t.substring(a,a+1);if(n.push(i),";"==s){var u=n.shift();null!=e.oninstruction&&e.oninstruction(u,n),n.length=0}else if(","!=s)throw new Error("Illegal terminator.");r=a+1}var l=t.indexOf(".",r);if(l==-1){r=t.length;break}var c=parseInt(t.substring(a+1,l));if(NaN==c)throw new Error("Non-numeric character in element length.");r=l+1,a=r+c}},this.oninstruction=null};var Guacamole=Guacamole||{};Guacamole.Status=function(e,t){var n=this;this.code=e,this.message=t,this.isError=function(){return n.code<0||n.code>255}},Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};var Guacamole=Guacamole||{};Guacamole.StringReader=function(e){function t(e){for(var t="",n=new Uint8Array(e),a=0;a<n.length;a++){var i=n[a];0===r?127===(127|i)?t+=String.fromCharCode(i):223===(31|i)?(o=31&i,r=1):239===(15|i)?(o=15&i,r=2):247===(7|i)?(o=7&i,r=3):t+="�":191===(63|i)?(o=o<<6|63&i,r--,0===r&&(t+=String.fromCharCode(o))):(r=0,t+="�")}return t}var n=this,a=new Guacamole.ArrayBufferReader(e),r=0,o=0;a.ondata=function(e){var a=t(e);n.ontext&&n.ontext(a)},a.onend=function(){n.onend&&n.onend()},this.ontext=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.StringWriter=function(e){function t(e){if(s+e>=i.length){var t=new Uint8Array(2*(s+e));t.set(i),i=t}s+=e}function n(e){var a,r;if(e<=127)a=0,r=1;else if(e<=2047)a=192,r=2;else if(e<=65535)a=224,r=3;else{if(!(e<=2097151))return void n(65533);a=240,r=4}t(r);for(var o=s-1,u=1;u<r;u++)i[o--]=128|63&e,e>>=6;i[o]=a|e}function a(e){for(var t=0;t<e.length;t++){var a=e.charCodeAt(t);n(a)}if(s>0){var r=i.subarray(0,s);return s=0,r}}var r=this,o=new Guacamole.ArrayBufferWriter(e),i=new Uint8Array(8192),s=0;o.onack=function(e){r.onack&&r.onack(e)},this.sendText=function(e){o.sendData(a(e))},this.sendEnd=function(){o.sendEnd()},this.onack=null};var Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(e){},this.disconnect=function(){},this.sendMessage=function(e){},this.state=Guacamole.Tunnel.State.CONNECTING,this.receiveTimeout=15e3,this.onerror=null,this.onstatechange=null,this.oninstruction=null},Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2},Guacamole.HTTPTunnel=function(e,t){function n(){window.clearTimeout(w),w=window.setTimeout(function(){a(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},l.receiveTimeout)}function a(e){l.state!==Guacamole.Tunnel.State.CLOSED&&(e.code!==Guacamole.Status.Code.SUCCESS&&l.onerror&&(l.state!==Guacamole.Tunnel.State.CONNECTING&&e.code===Guacamole.Status.Code.RESOURCE_NOT_FOUND||l.onerror(e)),l.state=Guacamole.Tunnel.State.CLOSED,v=!1,l.onstatechange&&l.onstatechange(l.state))}function r(){if(l.state===Guacamole.Tunnel.State.OPEN)if(g.length>0){v=!0;var e=new XMLHttpRequest;e.open("POST",f+u),e.withCredentials=y,e.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){4===e.readyState&&(200!==e.status?o(e):r())},e.send(g),g=""}else v=!1}function o(e){var t=parseInt(e.getResponseHeader("Guacamole-Status-Code")),n=e.getResponseHeader("Guacamole-Error-Message");a(new Guacamole.Status(t,n))}function i(e){function t(){if(l.state!==Guacamole.Tunnel.State.OPEN)return void(null!==a&&clearInterval(a));if(!(e.readyState<2)){var u;try{u=e.status}catch(e){u=200}if(r||200!==u||(r=s()),3===e.readyState||4===e.readyState){if(n(),p===h&&(3!==e.readyState||a?4!==e.readyState||a||clearInterval(a):a=setInterval(t,30)),0===e.status)return void l.disconnect();if(200!==e.status)return void o(e);var m;try{m=e.responseText}catch(e){return}for(;c<m.length;){if(c>=d){var v=m.substring(d,c),g=m.substring(c,c+1);if(f.push(v),";"===g){var y=f.shift();l.oninstruction&&l.oninstruction(y,f),f.length=0}d=c+1}var w=m.indexOf(".",d);if(w===-1){d=m.length;break}var S=parseInt(m.substring(c+1,w));if(0===S){a||clearInterval(a),e.onreadystatechange=null,e.abort(),r&&i(r);break}d=w+1,c=d+S}}}}var a=null,r=null,u=0,c=-1,d=0,f=new Array;p===h?e.onreadystatechange=function(){3===e.readyState&&(u++,u>=2&&(p=m,e.onreadystatechange=t)),t()}:e.onreadystatechange=t,t()}function s(){var e=new XMLHttpRequest;return e.open("GET",d+u+":"+S++),e.withCredentials=y,e.send(null),e}var u,l=this,c=e+"?connect",d=e+"?read:",f=e+"?write:",h=1,m=0,p=h,v=!1,g="",y=!!t,w=null;this.sendMessage=function(){function e(e){var t=new String(e);return t.length+"."+t}if(l.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var t=e(arguments[0]),n=1;n<arguments.length;n++)t+=","+e(arguments[n]);t+=";",g+=t,v||r()}};var S=0;this.connect=function(e){n();var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){if(200!==t.status)return void o(t);n(),u=t.responseText,l.state=Guacamole.Tunnel.State.OPEN,l.onstatechange&&l.onstatechange(l.state),i(s())}},t.open("POST",c,!0),t.withCredentials=y,t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(e)},this.disconnect=function(){a(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}},Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel,Guacamole.WebSocketTunnel=function(e){function t(){window.clearTimeout(o),o=window.setTimeout(function(){n(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},a.receiveTimeout)}function n(e){a.state!==Guacamole.Tunnel.State.CLOSED&&(e.code!==Guacamole.Status.Code.SUCCESS&&a.onerror&&a.onerror(e),a.state=Guacamole.Tunnel.State.CLOSED,a.onstatechange&&a.onstatechange(a.state),r.close())}var a=this,r=null,o=null,i={"http:":"ws:","https:":"wss:"};if("ws:"!==e.substring(0,3)&&"wss:"!==e.substring(0,4)){var s=i[window.location.protocol];if("/"===e.substring(0,1))e=s+"//"+window.location.host+e;else{var u=window.location.pathname.lastIndexOf("/"),l=window.location.pathname.substring(0,u+1);e=s+"//"+window.location.host+l+e}}this.sendMessage=function(e){function t(e){var t=new String(e);return t.length+"."+t}if(a.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var n=t(arguments[0]),o=1;o<arguments.length;o++)n+=","+t(arguments[o]);n+=";",r.send(n)}},this.connect=function(o){t(),r=new WebSocket(e+"?"+o,"guacamole"),r.onopen=function(e){t(),a.state=Guacamole.Tunnel.State.OPEN,a.onstatechange&&a.onstatechange(a.state)},r.onclose=function(e){n(new Guacamole.Status(parseInt(e.reason),e.reason))},r.onerror=function(e){n(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,e.data))},r.onmessage=function(e){t();var r,o=e.data,i=0,s=[];do{var u=o.indexOf(".",i);if(u!==-1){var l=parseInt(o.substring(r+1,u));i=u+1,r=i+l}else n(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."));var c=o.substring(i,r),d=o.substring(r,r+1);if(s.push(c),";"===d){var f=s.shift();a.oninstruction&&a.oninstruction(f,s),s.length=0}i=r+1}while(i<o.length)}},this.disconnect=function(){n(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}},Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel,Guacamole.ChainedTunnel=function(e){function t(e){function i(){e.onstatechange=a.onstatechange,e.oninstruction=a.oninstruction,e.onerror=a.onerror,o=e}a.disconnect=e.disconnect,a.sendMessage=e.sendMessage;var s=function(n){if(n&&n.code===Guacamole.Status.Code.UPSTREAM_TIMEOUT)return r=[],null;var a=r.shift();return a&&(e.onerror=null,e.oninstruction=null,e.onstatechange=null,t(a)),a};e.onstatechange=function(e){switch(e){case Guacamole.Tunnel.State.OPEN:i(),a.onstatechange&&a.onstatechange(e);break;case Guacamole.Tunnel.State.CLOSED:!s()&&a.onstatechange&&a.onstatechange(e)}},e.oninstruction=function(e,t){i(),a.oninstruction&&a.oninstruction(e,t)},e.onerror=function(e){!s(e)&&a.onerror&&a.onerror(e)},e.connect(n)}for(var n,a=this,r=[],o=null,i=0;i<arguments.length;i++)r.push(arguments[i]);this.connect=function(e){n=e;var i=o?o:r.shift();i?t(i):a.onerror&&a.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}},Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel;var Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.9";var Guacamole=Guacamole||{};Guacamole.VideoPlayer=function(){this.sync=function(){}},Guacamole.VideoPlayer.isSupportedType=function(e){return!1},Guacamole.VideoPlayer.getSupportedTypes=function(){return[]},Guacamole.VideoPlayer.getInstance=function(e,t,n){return null};