{% load staticfiles %}
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title>Cuckoo Sandbox</title>
        <link rel="shortcut icon" type="image/png" href=" {% static 'favicon-64x64.png' %}" sizes="64x64" />
        <link rel="shortcut icon" type="image/png" href=" {% static 'favicon-32x32.png' %}" sizes="32x32" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Cuckoo Sandbox" />
        <meta name="author" content="Cuckoo Sandbox" />

        <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet" />
        <link href="{% static "css/lightbox.css" %}" rel="stylesheet" />
        <script src="{% static "js/jquery/jquery.js" %}"></script>
        <script src="{% static "js/cuckoo/loader.js" %}"></script>
        <script src="{% static "js/misc/js.cookie.js" %}"></script>

        <!-- DataTables -->
        <link href="{% static "css/dataTables.bootstrap.min.css"%}" rel="stylesheet" />
        <script src="{% static "js/datatables/jquery.dataTables.min.js"%}"></script>
        <script src="{% static "js/datatables/dataTables.bootstrap.js"%}"></script>
        <script src="{% static "js/datatables/dataTables.responsive.min.js"%}"></script>
        <script src="{% static "js/misc/highlight.min.js"%}"></script>
        <link href="{% static "css/highlight.css"%}" rel="stylesheet" />
        <link href="{% static "css/responsive.dataTables.min.css"%}" rel="stylesheet" />

        <!-- jstree -->
        <script src="{% static "js/jstree/jstree.min.js"%}"></script>
        <script src="{% static "js/jstree/jstreegrid.js"%}"></script>
        <link href="{% static "js/jstree/default/style.min.css" %}" rel="stylesheet" />

        <!-- Font-Awesome -->
        <link href="{% static "css/font-awesome.min.css"%}" rel="stylesheet" />

        <!-- Graphs -->
        <script src="{% static "js/misc/d3.v3.min.js"%}"></script>
        <script src="{% static "js/misc/plotly.min.js"%}"></script>

        <!-- Custom style -->
        <!-- <link href="{% static "css/style.css" %}" rel="stylesheet"> -->
        <!-- <link href="{% static "css/analysis_sidebar.css" %}" rel="stylesheet"> -->


        {% if request.COOKIES.theme == "night" %}
            <link href="{% static "js/jstree/night/style.min.css" %}" rel="stylesheet" />
        {% elif request.COOKIES.theme == "cyborg" %}
            <link href="{% static "js/jstree/default/style.min.css" %}" rel="stylesheet" />
        {% endif %}
        
        <link href="{% static "css/main.css"%}" rel="stylesheet" type="text/css" />

    </head>

    <body 

        {% if request.COOKIES.theme == "night" %}
            class="night"
        {% elif request.COOKIES.theme == "cyborg" %}
            class="cyborg"
        {% endif %}

        id="{{ env.view_name }}"

    >

        <header>
            <nav class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
                <div class="navbar-header">
                    <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>

                <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="/">
                                <img src="{% static "graphic/cuckoo_inverse.png" %}" />
                            </a>
                        </li>
                        <li><a href="{% url "dashboard.views.index" %}"><span class="glyphicon glyphicon-dashboard"></span> Dashboard</a></li>
                        <li><a href="{% url "analysis/recent" %}"><span class="glyphicon glyphicon-list"></span> Recent</a></li>
                        <li><a href="{% url "analysis.views.pending" %}"><span class="glyphicon glyphicon-time"></span> Pending</a></li>
                        <li><a href="{% url "analysis.views.search" %}"><span class="glyphicon glyphicon-search"></span> Search</a></li>
                        <li><a href="{% url "submission/index" %}"><span class="glyphicon glyphicon-upload"></span> Submit</a></li>
                        <li><a href="{% url "analysis/import" %}"><span class="glyphicon glyphicon-import"></span> Import</a></li>
                    </ul>

                    <ul class="nav navbar-nav pull-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Options <span class="caret"></span></a>
                            <ul class="dropdown-menu pull-right">
                                <li><a href="http://cuckoosandbox.org" target="_blank">About</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Appearance</li>
                                <li><a id="theme_default" href="#">Default Theme</a></li>
                                <li><a id="theme_night" href="#">Night Theme</a></li>
                                <li><a id="theme_cyborg" href="#">Cyborg Theme</a></li>
                            </ul>
                        </li>
                    </ul>

                    <script>
                        $(document).ready(function(){
                            function theme_switch(theme) {
                                Cookies("theme", theme, {expires: 365 * 10});
                                // location.reload();
                                $('body').removeClass('cyborg night');
                                $('body').addClass(theme);
                            }

                            $(".nav .dropdown-menu li a[id^=theme_]").click(function(){
                                var theme = $(this).attr("id").substr(6);
                                theme_switch(theme);
                            });
                        });
                    </script>
                </nav>
            </nav>
        </header>
